/*! @health.gov.au/health-design-system v0.1.0 */
/* PANCAKE v1.4.1 PANCAKE-JS v1.2.1 */var AU=AU||{};!function(e){var t={};function n(e,t,n){"closing"===n?e.setAttribute("aria-expanded",!1):e.setAttribute("aria-expanded",!0)}function o(e,t,n,o){if("opening"===t||"open"===t)var a=n||"au-accordion--closed",i=o||"au-accordion--open";else a=o||"au-accordion--open",i=n||"au-accordion--closed";var l,r,s,c;c=a,(s=e).classList?s.classList.remove(c):s.className=s.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," "),r=i,(l=e).classList?l.classList.add(r):l.className=l.className+" "+r}t.Toggle=function(t,a,i){try{window.event.cancelBubble=!0,event.stopPropagation()}catch(e){}void 0===t.length&&(t=[t]),"object"!=typeof i&&(i={});for(var l=0;l<t.length;l++){var r=t[l],s=r.getAttribute("aria-controls"),c=document.getElementById(s);if(null==c)throw new Error("AU.accordion.Toggle cannot find the target to be toggled from inside aria-controls.\nMake sure the first argument you give AU.accordion.Toggle is the DOM element (a button or a link) that has an aria-controls attribute that points to a div that you want to toggle.");c.style.display="block",function(t){e.animate.Toggle({element:c,property:"height",speed:a||250,prefunction:function(e,a){"opening"===a?(e.style.display="block","function"==typeof i.onOpen&&i.onOpen()):"function"==typeof i.onClose&&i.onClose(),n(t,0,a),o(t,a)},postfunction:function(e,t){"closed"===t?(e.style.display="",e.style.height="","function"==typeof i.afterClose&&i.afterClose()):(e.style.display="",e.style.height="","function"==typeof i.afterOpen&&i.afterOpen()),o(e,t)}})}(r)}return!1},t.Open=function(t,a){try{window.event.cancelBubble=!0,event.stopPropagation()}catch(e){}void 0===t.length&&(t=[t]);for(var i=0;i<t.length;i++){var l,r=t[i],s=r.getAttribute("aria-controls"),c=document.getElementById(s);l="undefined"!=typeof getComputedStyle?window.getComputedStyle(c).height:c.currentStyle.height,0===parseInt(l)&&(c.style.height="0px"),c.style.display="",o(c,"opening"),o(r,"opening"),n(r,0,"opening"),function(t,n,a){e.animate.Run({element:t,property:"height",endSize:"auto",speed:n||250,callback:function(){o(a,"opening")}})}(c,a,r)}},t.Close=function(t,a){try{window.event.cancelBubble=!0,event.stopPropagation()}catch(e){}void 0===t.length&&(t=[t]);for(var i=0;i<t.length;i++){var l=t[i],r=l.getAttribute("aria-controls"),s=document.getElementById(r);o(l,"closing"),n(l,0,"closing"),function(t,n){e.animate.Run({element:t,property:"height",endSize:0,speed:n||250,callback:function(){t.style.display="",o(t,"close")}})}(s,a)}},e.accordion=t}(AU),"undefined"!=typeof module&&(module.exports=AU);var AU=AU||{};!function(e){var t={};function n(e,t,n){if(e===t)return{stepSize:0,steps:0,intervalTime:0};var o=t-e,a=n/o,i=o<0?-1:1,l=Math.abs(o/i);return a=n/l,Math.abs(a)<1e3/60&&(a=1e3/60,i=o/(l=Math.ceil(Math.abs(n/a)))),{stepSize:i,steps:l-1,intervalTime:a}}"undefined"!=typeof module&&(t.CalculateAnimationSpecs=n),t.GetCSSPropertyBecauseIE=function(t,n){if("undefined"!=typeof getComputedStyle)return window.getComputedStyle(t)[n];var o=t.currentStyle[n];return"auto"===o&&(o=e.animate.CalculateAuto(t,n)),o},t.CalculateAuto=function(e,t){var n,o;return e.style[t]=(o="height"===t?(n=e.clientHeight,e.style[t]="auto",e.clientHeight):(n=e.clientWidth,e.style[t]="auto",e.clientWidth),n+"px"),parseInt(o)},t.Stop=function(e){clearInterval(e.AUanimation)},t.Run=function(t){var o=t.element,a=t.speed||250;void 0===o.length&&(o=[o]),"function"!=typeof t.callback&&(t.callback=function(){}),o[0].AUinteration=0,o[0].AUinterations=o.length;for(var i=0;i<o.length;i++){var l=o[i];e.animate.Stop(l);var r=parseInt(e.animate.GetCSSPropertyBecauseIE(l,t.property)),s=t.endSize;"auto"===t.endSize&&(s=e.animate.CalculateAuto(l,t.property));var c=n(r,s,a),u=r;c.stepSize<0?l.AUtoggleState="closing":0<c.stepSize&&(l.AUtoggleState="opening"),function(n,a,i,l,r){n.AUanimation=setInterval(function(){if(a===r||0===l.steps){if(e.animate.Stop(n),n.style[t.property]=r+"px",n.AUtoggleState="",o[0].AUinteration++,"auto"===t.endSize&&(n.style[t.property]=""),o[0].AUinteration>=o[0].AUinterations)return t.callback()}else i+=l.stepSize,n.style[t.property]=i+"px",l.steps--},Math.abs(l.intervalTime))}(l,r,u,c,s)}},t.Toggle=function(t){var n=t.element,o=t.property||"height",a=t.speed||250,i=void 0===t.closeSize?0:t.closeSize,l=void 0===t.openSize?"auto":t.openSize;void 0===n.length&&(n=[n]),"function"!=typeof t.prefunction&&(t.prefunction=function(){}),"function"!=typeof t.postfunction&&(t.postfunction=function(){}),"function"!=typeof t.callback&&(t.callback=function(){}),n[0].AUtoggleInteration=0,n[0].AUtoggleInterations=n.length;for(var r=0;r<n.length;r++){var s,c=n[r];e.animate.Stop(c);var u="",d="",f=parseInt(e.animate.GetCSSPropertyBecauseIE(c,t.property));if(f===i||"closing"===c.AUtoggleState)s=l,u="opening",d="open";else{if(f===i&&"opening"!==c.AUtoggleState)throw new Error("AU.animate.Toggle cannot determine state of element");s=i,u="closing",d="closed"}t.prefunction(c,u),e.animate.Run({element:c,endSize:s,property:o,speed:a,callback:function(){if(n[0].AUtoggleInteration++,n[0].AUtoggleInteration===n[0].AUinterations){var e=t.callback(c,d);return t.postfunction(c,d),e}t.postfunction(c,d)}})}},e.animate=t}(AU),"undefined"!=typeof module&&(module.exports=AU),"undefined"!=typeof exports&&(Object.defineProperty(exports,"__esModule",{value:!0}),eval("exports.default = AU"));var AU=AU||{};!function(e){var t={},n={},o=!1;function a(e,t,n,o){if("opening"===t||"open"===t)var a=n||"au-main-nav__content--closed",i=o||"au-main-nav__content--open";else a=o||"au-main-nav__content--open",i=n||"au-main-nav__content--closed";var l,r,s,c;c=a,(s=e).classList?s.classList.remove(c):s.className=s.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," "),r=i,(l=e).classList?l.classList.add(r):l.className=l.className+" "+r}function i(e,t,n){function o(e){var t=n.apply(this,arguments);return!1===t&&(e.stopPropagation(),e.preventDefault()),t}function a(){var t=n.call(e,window.event);return!1===t&&(window.event.returnValue=!1,window.event.cancelBubble=!0),t}return e.addEventListener?(e.addEventListener(t,o,!1),{element:e,handler:o,event:t}):(e.attachEvent("on"+t,a),{element:e,handler:a,event:t})}function l(e){e.element.removeEventListener?e.element.removeEventListener(e.event,e.handler):e.element.detachEvent("on"+e.event,e.handler)}t.Toggle=function(r,s,c){if(!o){o=!0;try{window.event.cancelBubble=!0,event.stopPropagation()}catch(e){}"object"!=typeof c&&(c={});var u,d,f=r.getAttribute("aria-controls"),p=document.getElementById(f),g=p.querySelector(".au-main-nav__menu"),m=p.querySelector(".au-main-nav__overlay"),h=p.querySelector(".au-main-nav__toggle--close"),y=p.querySelector(".au-main-nav__toggle--open"),v=p.querySelector(".au-main-nav__focus-trap-top"),b=p.querySelector(".au-main-nav__focus-trap-bottom"),w=g.querySelectorAll("a, .au-main-nav__toggle"),A=-1===p.className.indexOf("au-main-nav__content--open"),S=g.offsetWidth,_=A?"opening":"";m.style.display="block",u=p,d=s,e.animate.Toggle({element:g,property:"left",openSize:0,closeSize:-1*S,speed:d||250,prefunction:function(){"opening"===_?(g.style.display="block",m.style.left=0,m.style.opacity=.5,"function"==typeof c.onOpen&&c.onOpen()):(m.style.opacity="0","function"==typeof c.onClose&&c.onClose())},postfunction:function(){"opening"===_?(h.focus(),v.setAttribute("tabindex",0),b.setAttribute("tabindex",0),n.focusTop=i(v,"focus",function(){w[w.length-1].focus()}),n.focusBottom=i(b,"focus",function(){w[0].focus()}),n.escKey=i(document,"keyup",function(){var e,n=n||window.event,o=(e=m,"display",("undefined"!=typeof getComputedStyle?getComputedStyle(e,null):e.currentStyle).display);27===n.keyCode&&"block"===o&&t.Toggle(r,d,c)}),"function"==typeof c.afterOpen&&c.afterOpen()):(y.focus(),v.removeAttribute("tabindex"),b.removeAttribute("tabindex"),l(n.focusTop),l(n.focusBottom),l(n.escKey),"function"==typeof c.afterClose&&c.afterClose()),a(u,_),a(document.body,_,"au-main-nav__scroll--unlocked","au-main-nav__scroll--locked"),g.style.display="",g.style.left="",m.style.display="",m.style.left="",m.style.opacity="",o=!1}})}},e.mainNav=t}(AU),"undefined"!=typeof module&&(module.exports=AU);var AU=AU||{};"undefined"!=typeof module&&(module.exports=AU),function(e){e(document).ready(function(){var t=e(".health-back-to-top");e(document).bind("scroll",function(){e(document).scrollTop()>1e3?t.addClass("isVisible"):t.removeClass("isVisible")}),t.click(function(){e("html,body").stop().animate({scrollTop:0},"slow","swing")})})}(jQuery),function(e){e(document).ready(function(){void 0!==e.fancybox&&e('a[data-lightbox="fancybox"]').fancybox({btnTpl:{zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><i class="fa fa-search-plus"></i> Zoom</button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><i class="fa fa-times"></i> Close</button>'}})})}(jQuery),function(e){e(document).ready(function(){if("undefined"!=typeof LazyLoad)var t=new LazyLoad({callback_load:function(t){
// Remove all the space reserving class and styles.
e(t).parents(".image-outer").find(".image-placeholder").remove(),e(t).parents(".image-wrapper").removeClass("image-loading").removeClass("image-wrapper"),bottomAlignImage(e(t),e(t).parents(".health-image-text__image"))}});
// If the user tries to print, then try to load all the images so printing works :)
// https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeprint
// Webkit browsers.
"function"==typeof window.webkitConvertPointFromNodeToPage?window.matchMedia("print").addListener(function(e){e.matches&&(t._settings.threshold=999999999,t.update(),window.scrollTo(0,document.body.scrollHeight))}):window.onbeforeprint=function(){t._settings.threshold=999999999,t.update(),window.scrollTo(0,document.body.scrollHeight)}})}(jQuery),function(e){e(document).ready(function(){
// Resizing.
function t(){e(window).width()>769?0!==e(".au-main-nav .health-search--global").length&&e(".health-search--global").insertAfter("#block-menu-menu-sub-menu").show():0===e(".au-main-nav .health-search--global").length&&(e(".health-search--global").insertAfter("#main-nav-default").hide(),e(".au-main-nav__toggle--search i").addClass("fa-search").removeClass("fa-times"))}var n;// Set resizeTimer to empty so it resets on page load
// On resize, run the function and reset the timeout
// Autocomplete.
e("#edit-funnelback-search-field, #edit-funnelback-search-field--2").autocomplete({source:function(t,n){
// Get results from funnelback.
e.ajax({url:"/funnelback/search/autocompletion/"+t.term,dataType:"json",success:function(e){n(e)}})},minLength:2,classes:{"ui-autocomplete":"au-body au-link-list"},
// When the user selects a value, submit the form.
select:function(t,n){e(this).val(n.item.value),e(t.target).parents("form").submit()},
// Show loading spinner.
search:function(t,n){e(t.target).parents("form").find(".health-loading").toggleClass("health-loading--active")},
// Hide loading spinner.
response:function(t,n){e(t.target).parents("form").find(".health-loading").toggleClass("health-loading--active")}}),e(window).resize(function(){clearTimeout(n),n=setTimeout(t,250)}),t(),
// Search button handler.
e(".au-main-nav__toggle--search").click(function(t){e(".health-search--global").toggle(),e(this).find("i").toggleClass("fa-search").toggleClass("fa-times")}),
// Filter toggles.
e(".health-filter__title").click(function(t){e(this).toggleClass("expanded"),e(".block-facetapi, .block-funnelback").toggleClass("facetshow")}),
// Add correct grid class to seccond refine search in listings.
e(".region-navigation #search-api-page-search-form-default-search--2").addClass("col-xs-12"),
// Add 'Show more' to facets.
e(".health-facets").each(function(){var t=e(this);
// Hide filters beyond the limit.
t.find("li:gt(7)").hide(),
// Add a 'Show more' button if the facet has more than the limit.
t.filter(function(){return t.find("li").length>8}).each(function(){e('<button aria-controls="'+t.attr("id")+'" class="health-filter__more au-btn au-btn--tertiary">').text("Show more").click(function(){return t.find("li:hidden").length>0?(t.find("li:gt(7)").show(),e(this).addClass("open").text("Show less")):(t.find("li:gt(7)").hide(),e(this).removeClass("open").text("Show more")),!1}).insertAfter(t)})})})}(jQuery),function(e){e(document).ready(function(){
//YouTube embed on click
e(".health-video__preview__link").click(function(t){t.preventDefault();var n="https://www.youtube.com/embed/"+e(this).attr("data-youtubeid")+"?autoplay=1&autohide=2&border=0&wmode=opaque&rel=0&html5=1&fs=1";
// Create an iFrame with autoplay set to true
e(this).data("params")&&(n+="&"+e(this).data("params"));
// Create an iframe that replicates the Youtube embed.
var o=e('<div class="au-responsive-media-vid au-responsive-media-vid--16x9"></div>'),a=e("<iframe/>",{title:"YouTube video player",id:"youtube-iframe",class:"au-responsive-media-vid__item",allowfullscreen:"allowfullscreen",frameborder:"0","aria-live":"assertive",src:n});
// Replace the YouTube thumbnail with YouTube HTML5 Player
o.append(a),e(this).replaceWith(o),
// Hide the length.
e(".health-video__preview__length").hide()})})}(jQuery);